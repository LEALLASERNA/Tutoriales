
Un modificador es una pieza de código reutilizable que puedes aplicar a una o más funciones. Te permite verificar ciertas condiciones o ejecutar lógica adicional **antes** de que una función se ejecute, o incluso decidir si la función debe ejecutarse en absoluto.

Ver más en [[3. FUNCIONES]].


```javascript
pragma solidity ^0.8.0;

contract Modificadores {
    address public owner;

    constructor() {
        owner = msg.sender;
    }

    // Modificador que solo permite que el propietario ejecute la función
    modifier soloPropietario() {
        require(msg.sender == owner, "No eres el propietario");
        _;
    }

    // Función que solo puede ser llamada por el propietario
    function cambiarPropietario(address nuevoPropietario) public soloPropietario {
        owner = nuevoPropietario;
    }
}
```
**`modifier soloPropietario`** verifica que solo el propietario pueda llamar la función. Si la condición `msg.sender == owner` no se cumple, la transacción se revierte.
El símbolo `_` en el modificador indica **dónde se ejecutará el cuerpo de la función**. Esto significa que, si la condición del modificador se cumple, el código de la función original seguirá ejecutándose.

## Modificadores con parámetros

Al igual que las funciones, los modificadores pueden aceptar parámetros, lo que permite condiciones más dinámicas.

```javascript
pragma solidity ^0.8.0;

contract Modificadores {
    address public owner = msg.sender;

    modifier soloSiMayor(uint _edadMinima, uint _edad) {
        require(_edad >= _edadMinima, "No cumples con la edad minima");
        _;
    }

    function acceder(uint _edad) public soloSiMayor(18, _edad) pure returns (string memory) {
        return "Acceso concedido";
    }
}
```
El modificador **`soloSiMayor`** toma dos parámetros: la edad mínima y la edad actual.
La función `acceder` solo permite que se ejecute si el usuario tiene al menos 18 años, gracias al modificador.

## Múltiples modificadores en una función

Puedes aplicar múltiples modificadores a una misma función. Esto es útil cuando quieres imponer varias restricciones o condiciones.

```javascript
pragma solidity ^0.8.0;

contract Modificadores {
    address public owner = msg.sender;
    uint public valorMinimo = 100;

    modifier soloPropietario() {
        require(msg.sender == owner, "No eres el propietario");
        _;
    }

    modifier valorSuficiente(uint _valor) {
        require(_valor >= valorMinimo, "Valor insuficiente");
        _;
    }

    function transferir(uint _valor) public soloPropietario valorSuficiente(_valor) {
        // Lógica de la función
    }
}
```
La función `transferir` requiere que el usuario sea el propietario **y** que el valor transferido sea mayor o igual al valor mínimo.

## Uso avanzado: Modificadores para controlar el flujo

Un modificador también puede cambiar el flujo de la función, por ejemplo, bloqueando completamente su ejecución en función de una condición.

```javascript
pragma solidity ^0.8.0;

contract Modificadores {
    bool public pausado = false;
    
    modifier cuandoNoEstaPausado() {
        require(!pausado, "Contrato pausado");
        _;
    }
    
    function cambiarEstado(bool _estado) public {
        pausado = _estado;
    }
    
    function ejecutar() public cuandoNoEstaPausado {
        // Función que solo se ejecuta si el contrato no está pausado
    }
}
```
Aquí, el modificador `cuandoNoEstaPausado` evita que la función `ejecutar` se llame si el contrato está pausado.

## Modificadores anidados

Los modificadores también pueden usar otros modificadores. Este enfoque te permite construir lógicas de verificación más complejas de manera modular.

```javascript
pragma solidity ^0.8.0;

contract Modificadores {
    address public owner = msg.sender;
    bool public pausado = false;

    modifier soloPropietario() {
        require(msg.sender == owner, "No eres el propietario");
        _;
    }

    modifier cuandoNoEstaPausado() {
        require(!pausado, "Contrato pausado");
        _;
    }

    function realizarAccion() public soloPropietario cuandoNoEstaPausado {
        // Solo el propietario puede ejecutar esto y solo si el contrato no está pausado
    }
}
```
En este caso, la función `realizarAccion` utiliza dos modificadores: `soloPropietario` y `cuandoNoEstaPausado`, lo que añade una verificación doble antes de que se ejecute la lógica.

### Modificadores que modifican el comportamiento

Un modificador puede incluso alterar el estado de la función, por ejemplo, medir el tiempo de ejecución o cambiar el valor de retorno.

```javascript

pragma solidity ^0.8.0;

contract Modificadores {
    uint public tiempoInicio;

    modifier medirTiempoEjecucion() {
        tiempoInicio = block.timestamp;
        _;
        uint tiempoFinal = block.timestamp;
        uint duracion = tiempoFinal - tiempoInicio;
        // Hacer algo con la duración, como registrar el tiempo
    }

    function ejecutar() public medirTiempoEjecucion {
        // Lógica de la función
    }
}
```
Aquí, el modificador `medirTiempoEjecucion` guarda el tiempo al inicio y al final de la función, permitiendo medir cuánto tardó en ejecutarse la función.

### Beneficios de usar modificadores

- **Reutilización de código**: Evita repetir la misma lógica de validación en varias funciones.
- **Mejora de la legibilidad**: Hace que las funciones sean más legibles al separar las validaciones de la lógica principal.
- **Modularidad**: Permite una mejor organización del código al separar las condiciones y validaciones.